# ðŸ“š Documentation

## Overview
This automation testing system uses **OpenAI Agents SDK** and **Microsoftâ€™s MCP Playwright Server** to build a multi-agent testing pipeline. It supports:
- End-to-end test discovery and execution
- Multi-agent coordination (5 roles)
- MCP-only test automation (zero browser code)
- Full test result reporting and observability

---

## Agents & Responsibilities

| Agent      | Description |
|------------|-------------|
| `Discovery Agent` | Scans the provided app URL and generates a `site_map.json` file with all forms/pages/actions. |
| `Planning Agent`  | Reads `site_map.json` and generates `automation_plan.md` with detailed test cases. |
| `Execution Agent` | Executes the test plan using MCP Playwright server and logs results/snapshots. |
| `Review Agent`    | Audits test coverage; re-triggers planning/execution if any gap/failure is found. |
| `Reporting Agent` | Aggregates all results into a markdown summary: `automation_plan_results.md`. |

---

## File Paths

| Path | Description |
|------|-------------|
| `backend/fs_files/{test_run_id}/site_map.json` | Site structure generated by Discovery Agent |
| `backend/fs_files/{test_run_id}/automation_plan.md` | Test plan written by Planning Agent |
| `backend/fs_files/{test_run_id}/automation_plan_results_raw.txt` | Execution logs and outcomes |
| `backend/fs_files/{test_run_id}/automation_plan_results.md` | Final readable report (table) |
| `backend/fs_files/{test_run_id}/screenshots/` | Captured screenshots during test runs |
| `backend/fs_files/{test_run_id}/logs/` | Verbose console logs from tests |
| `backend/fs_files/{test_run_id}/review_results.md` | Review agent's findings and decisions |

---

## Running the System

```bash
python backend/orchestrator.py
```
This will:
1. Launch MCP servers (filesystem + playwright)
2. Sequentially run all agents
3. Write outputs in `backend/fs_files/{test_run_id}/`

> Cleanup old files before starting:
```bash
python backend/scripts/clean_logs.py
```

---

## Environment Variables (`.env`)
```
OPENAI_API_KEY=
OPENAI_API_BASE=
OPENAI_API_VERSION=2023-07-01-preview
OPENAI_DEPLOYMENT_MODEL=gpt-4
```
> Store these as GitHub secrets for CI.

---

## Developer Scripts

| Script | Description |
|--------|-------------|
| `backend/scripts/clean_logs.py` | Deletes screenshots and logs from previous runs |
| `backend/tests/` | Contains test coverage for API + file cleanup |

---

## API Endpoints (FastAPI)

| Method | Path | Description |
|--------|------|-------------|
| GET | `/list-files` | Lists files in `backend/fs_files/{test_run_id}/` directory |
| GET | `/download/{filename}` | Download specific file by name |

---

## Future Enhancements

- âœ… React UI for test control, logs, artifact preview
- âœ… Vercel deployment for frontend
- ðŸ”„ Retry queue for failed tests
- ðŸ“ˆ Live observability dashboard
- ðŸ”’ Role-based access for test dashboards

---
